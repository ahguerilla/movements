{% extends "account/base.html" %}

{% load url from future %}
{% load i18n %}
{% load widget_tweaks %}

{% block head_title %}{% trans "Change Password" %}{% endblock %}

{% block content %}

{% if token_fail %}
<div class="row">
  <div class="col-md-offset-2 col-md-8 center-content">
    <h1>{% trans "Bad Token" %}</h1>
    {% url 'account_reset_password' as passwd_reset_url %}
    <p>{% blocktrans %}The password reset link was invalid, possibly because it has already been used.  Please request a <a href="{{ passwd_reset_url }}">new password reset</a>.{% endblocktrans %}</p>
  </div>
</div>
{% else %}
<div class="row">
  <div class="col-md-offset-4 col-md-4">    
    {% if form %}
      <div class="row in-container">
        <form method="POST" action="" class="uniForm form-horizontal" role="form">
          {% csrf_token %}
          <div><h4>{% trans "Change Password" %}</h4></div>
          <div class="form-group">
            <div class="col-sm-12">
              {{ form.password1.errors }}
              {% render_field form.password1 class="form-control input-sm" placeholder="New Password" %}
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              {{ form.password2.errors }}
              {% render_field form.password2 class="form-control input-sm" placeholder="New Password (again)" %}
            </div>              
          </div>
          <div class="form-group">
            <div class="col-xs-offset-6 col-xs-6">
              <button class="btn btn-success full-width" type="submit">{% trans "Change Password" %}</button>
            </div>
          </div>
        </form>
      </div>
    {% else %}
      <p>{% trans 'Your password is now changed.' %}</p>
    {% endif %}
  </div>
</div>
{% endif %}

{% endblock %}

{% extends "base_v2.html" %}
{% load avatar_tags %}
{% load account %}
{% load compress %}
{% load i18n %}

{% block header_padding %}{% endblock %}

{% block content_outside_container %}
  {% if is_self %}
    {% include "users/snippets/profile_navigation.html" %}
  {% endif %}
{% endblock %}

{% block content %}
<div id="profile-view" class="row setting-page">
  <div class="col-xs-4">
    <div class="poster clearfix">
      <div class="avatar">
        {% primary_avatar user_details 60 %}
      </div>
      <div class="poster-details">
        <div class="poster-name">{{ user_details.username }}</div>
        <div class="poster-rating"><span class="rateit"
              data-rateit-readonly="true"
              data-rateit-value="3"
              data-rateit-min="0"
              data-rateit-starwidth="22"
              data-rateit-starheight="17"
              data-rateit-max="5"></span>
          </div>
      </div>
    </div>
    <hr />
    <div class="settings-title">Bio</div>
    <div class="bio">
      {{ user_profile.bio }}
    </div>
    <hr />
    <div class="settings-title">Skills</div>
    <div class="tags">
      {% for interest in user_profile.interests.all %}
        <div class="tag">{{ interest }}</div>
      {% endfor %}
    </div>
  </div>
  <div class="col-xs-8">
    <div id="marketitems"></div>
    <div id="ajaxloader">
      <img src="{{ STATIC_URL }}images/ajax-loader.gif"/>
    </div>
  </div>
</div>
{% endblock %}

{% block endjavascript %}
    {% include "market/clientside/marketitem.html" %}
    {% include "market/clientside/closemarketitemdialog.html"%}
    {% include "market/clientside/reportdialog.html" %}
    <script type="text/javascript">
      $(document).ready(function(){
        window.GuerillaMarket = window.GuerillaMarket || {};
        window.GuerillaMarket.userDefaultTags = {'skills': [], 'issues': [], 'countries': []};
        var userId = null;
        {% if not is_self %}
        userId = {{ user_details.id }};
        {% endif %}
        window.ahr.market.initProfile(userId);
      });
    </script>
{% endblock %}